@page
@model artshare_server.WebApp.Pages.Creators.Artworks.EditModel
@{
}

<section class="banner-area relative" id="home">
    <div class="container">
        <section class="gallery-area section-gap" id="gallery">
            <form id="searchForm" method="post" style="margin:auto;max-width:1000px">
                <div style="display: flex; flex-wrap: wrap; justify-content: center;">
                    <div style="flex: 1; margin-right: 20px;">
                        <div class="single-blog" style="display: flex; justify-content: center;">
                            <ul>
                                @foreach (var genre in Model.Genres)
                                {
                                    <li style="display: inline-block; margin-right: 10px;">
                                        <input type="radio" id="genre_@(genre.genreId)" asp-for="@Model.SelectedGenreId" value="@genre.genreId" />
                                        <label for="genre_@(genre.genreId)">
                                            @genre.name
                                        </label>
                                    </li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>
                <div style="display: flex; flex-wrap: wrap; justify-content: center;">
                    <div style="flex: 1; margin-top: 20px;">
                        <div class="thumb watermark-list" style="display: flex; flex-wrap: wrap; justify-content: center; max-width: 1000px;">
                            @foreach (var watermark in Model.Watermarks)
                            {
                                <div style="margin: 10px;">
                                    <input type="radio" id="watermark_@(watermark.watermarkId)" asp-for="@Model.SelectedWatermarkId" value="@watermark.watermarkId" style="transform: scale(2);" />
                                    <label for="watermark_@(watermark.watermarkId)">
                                        <img src="@watermark.watermarkUrl" alt="Watermark" style="max-width: 200px; max-height: 200px;" />
                                    </label>
                                </div>
                            }
                        </div>
                    </div>
                </div>
                <div class="input-container mt-10">
                    <input type="text" asp-for="@Model.UpdateArtworkViewModel.Title" placeholder="Title" required class="single-input">
                </div>
                <div class="input-container mt-10">
                    <input type="text" asp-for="@Model.UpdateArtworkViewModel.Description" placeholder="Description" required class="single-input">
                </div>
                <div class="input-container mt-10">
                    <input type="number" asp-for="@Model.UpdateArtworkViewModel.Price" placeholder="Price" required class="single-input">
                </div>
                <div class="input-container mt-10">
                    <!-- Use ASP.NET Core Tag Helper for file input -->
                    <input type="file" asp-for="@Model.UpdateArtworkViewModel.OrginalArtworkFile" required class="single-input">
                </div>
                <div class="input-container mt-10">
                    <!-- Combo box for selecting public/private -->
                    <select name="selectedStatus" asp-for="@Model.UpdateArtworkViewModel.Status" class="single-input" required>
                        <option value="">Select Status</option>
                        <option value="0">Public</option>
                        <option value="1">Private</option>
                    </select>
                </div>
                <button type="submit" style="margin: auto" class="primary-btn text-uppercase d-flex justify-content-center">Submit</button>
            </form>
        </section>
    </div>
</section>

<style>
    .input-container {
        max-width: 600px; /* Adjust width as needed */
        margin: auto; /* Center horizontally */
        display: flex; /* Use flexbox */
        justify-content: center; /* Center children horizontally */
        padding: 5px;
    }

    .single-input {
        width: 100%;
    }
</style>

<script>
    function tickCheckboxes() {
        // Get the selected genre id
        var selectedGenreId = document.querySelector('input[name="selectedGenreId"]:checked');

        // Get the selected watermark id
        var selectedWatermarkId = document.querySelector('input[name="@Model.SelectedWatermarkId"]:checked');

        // Get the selected status
        var selectedStatus = "@Model.UpdateArtworkViewModel.Status";

        // If both genre, watermarkId, and status are selected
        if (selectedGenreId && selectedWatermarkId && selectedStatus !== "") {
            // Tick the corresponding checkboxes
            document.getElementById('genre_' + selectedGenreId.value).checked = true;
            document.getElementById('watermark_' + selectedWatermarkId.value).checked = true;

            // Set the selected value for the status dropdown
            var statusDropdown = document.querySelector('select[name="selectedStatus"]');

            if (selectedStatus === "Public") {
                statusDropdown.value = "0";
            } else if (selectedStatus === "Private") {
                statusDropdown.value = "1";
            }
        }
    }

    document.addEventListener('DOMContentLoaded', function () {
        tickCheckboxes();
    });
</script>
